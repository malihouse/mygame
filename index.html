
<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIé­”æ³•è½¬ç›˜ä¹å›­</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    @keyframes float {

      0%,
      100% {
        transform: translateY(0) rotate(0deg);
      }

      50% {
        transform: translateY(-15px) rotate(5deg);
      }
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.1);
      }

      100% {
        transform: scale(1);
      }
    }

    .mascot {
      animation: float 3s ease-in-out infinite;
    }

    .result-card {
      transition: transform 0.5s ease, opacity 0.5s ease;
    }

    .result-card.hidden {
      transform: scale(0.9);
      opacity: 0;
    }

    canvas {
      transition: transform 0.3s ease;
      border: 2px solid #ffffff;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    canvas:hover {
      transform: scale(1.08);
    }

    .wheel-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .wheel-indicator {
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 0 12px 18px 12px;
      border-color: transparent transparent #e879f9 transparent;
      margin-top: 6px;
      margin-bottom: 3px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    }

    .button {
      transition: all 0.3s ease;
      border-radius: 9999px;
    }

    .button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    .button:active {
      transform: scale(0.98);
    }

    body {
      background: linear-gradient(135deg, #f5d0fe, #bfdbfe, #fef3c7);
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-6 overflow-hidden">
  <div
    class="max-w-5xl w-full bg-white/95 backdrop-blur-lg rounded-3xl shadow-xl p-8 relative border border-purple-200">
    <img src="https://api.dicebear.com/9.x/bottts/svg?seed=wheelBot" alt="é­”æ³•è½¬ç›˜æœºå™¨äºº"
      class="mascot absolute -top-20 left-1/2 -translate-x-1/2 w-24 h-24">
    <h1 class="text-5xl font-extrabold text-purple-800 text-center mb-8 animate-pulse drop-shadow-md">
      ğŸ¡ AIé­”æ³•è½¬ç›˜ä¹å›­ ğŸ¡
    </h1>
    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-x-6 gap-y-8 mb-10">
      <div class="wheel-container">
        <canvas id="roleWheel" width="160" height="160"
          class="rounded-full bg-gradient-to-br from-pink-100 to-pink-50"></canvas>
        <div class="wheel-indicator"></div>
        <p class="mt-2 text-xl font-semibold text-pink-700">è§’è‰²</p>
      </div>
      <div class="wheel-container">
        <canvas id="sceneWheel" width="160" height="160"
          class="rounded-full bg-gradient-to-br from-blue-100 to-blue-50"></canvas>
        <div class="wheel-indicator"></div>
        <p class="mt-2 text-xl font-semibold text-blue-700">åœºæ™¯</p>
      </div>
      <div class="wheel-container">
        <canvas id="actionWheel" width="160" height="160"
          class="rounded-full bg-gradient-to-br from-green-100 to-green-50"></canvas>
        <div class="wheel-indicator"></div>
        <p class="mt-2 text-xl font-semibold text-green-700">åŠ¨ä½œ</p>
      </div>
      <div class="wheel-container">
        <canvas id="wearWheel" width="160" height="160"
          class="rounded-full bg-gradient-to-br from-orange-100 to-orange-50"></canvas>
        <div class="wheel-indicator"></div>
        <p class="mt-2 text-xl font-semibold text-orange-700">ç©¿ç€</p>
      </div>
      <div class="wheel-container">
        <canvas id="emotionWheel" width="160" height="160"
          class="rounded-full bg-gradient-to-br from-indigo-100 to-indigo-50"></canvas>
        <div class="wheel-indicator"></div>
        <p class="mt-2 text-xl font-semibold text-indigo-700">æƒ…ç»ª</p>
      </div>
    </div>
    <div class="flex justify-center gap-6 mb-8">
      <button onclick="spinWheels()"
        class="button flex items-center gap-3 bg-gradient-to-r from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 text-white font-bold py-4 px-8 shadow-lg">
        <span class="text-2xl">ğŸ°</span> è½¬åŠ¨é­”æ³•ç›˜
      </button>
      <button onclick="copyPrompt()"
        class="button flex items-center gap-3 bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-bold py-4 px-8 shadow-lg">
        <span class="text-2xl">ğŸ“‹</span> å¤åˆ¶é­”æ³•è¯
      </button>
    </div>
    <div id="result"
      class="result-card bg-gradient-to-br from-yellow-50 to-yellow-100 border-4 border-purple-300 rounded-2xl p-6 text-xl font-semibold text-gray-900 text-center shadow-md min-h-[70px]">
      å¿«æ¥è½¬åŠ¨é­”æ³•ç›˜ï¼Œåˆ›é€ ä½ çš„é­”æ³•æç¤ºè¯å§ï¼âœ¨
    </div>
  </div>
  <script>
    const newRoles = ["å°å¥³å­©", "å°ç”·å­©", "æé¾™", "é•¿é¢ˆé¹¿", "ä¼é¹…", "æœºå™¨äºº", "ç‹¬è§’å…½", "å°ç†Š", "ç‹ç‹¸", "çŒ´å­"];
    const newScenes = ["æ£®æ—", "å¤ªç©º", "æµ·åº•", "å±±é¡¶", "å¨æˆ¿", "æ²™æ¼ ", "å†°é›ªç‹å›½", "å¤©ç©ºä¹‹åŸ", "æ“åœº", "æœªæ¥åŸå¸‚"];
    const newActions = ["è·³èˆ", "ç”»ç”»", "åƒè›‹ç³•", "å¼¹é’¢ç´", "å¼€è½¦", "æ‰“å–·åš", "å”±æ­Œ", "æ»‘æ»‘æ¢¯", "æ¸¸æ³³", "çœ‹ä¹¦"];
    const newWears = ["æˆ´å¸½å­çš„", "ç©¿è£™å­çš„", "ç©¿å®‡èˆªæœçš„", "ç©¿è¥¿è£…çš„", "æˆ´çœ¼é•œçš„", "èƒŒç€ä¹¦åŒ…çš„", "ç©¿ç¡è¡£çš„", "ç©¿é›¨è¡£çš„", "æˆ´ç‹å† çš„", "æŠ«ç€æ–—ç¯·çš„"];
    const newEmotions = ["å¼€å¿ƒçš„", "å®³ç¾çš„", "ç”Ÿæ°”çš„", "ç´§å¼ çš„", "ç¡ç€çš„", "å›°æƒ‘çš„", "æƒŠè®¶çš„", "ä¼¤å¿ƒçš„", "å¾—æ„çš„", "è°ƒçš®çš„"];

    const wheels = [
      { id: 'roleWheel', items: newRoles, colors: ['#ff6b6b', '#ff8787'], label: 'è§’è‰²' },
      { id: 'sceneWheel', items: newScenes, colors: ['#4dabf7', '#74c0fc'], label: 'åœºæ™¯' },
      { id: 'actionWheel', items: newActions, colors: ['#51cf66', '#69db7c'], label: 'åŠ¨ä½œ' },
      { id: 'wearWheel', items: newWears, colors: ['#ff922b', '#ffa94d'], label: 'ç©¿ç€' },
      { id: 'emotionWheel', items: newEmotions, colors: ['#a07cc5', '#b39ddb'], label: 'æƒ…ç»ª' }
    ];

    let isSpinning = false;

    function drawWheel(canvas, items, colors, rotation) {
      const ctx = canvas.getContext('2d');
      const radius = canvas.width / 2;
      const arc = Math.PI * 2 / items.length;

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(radius, radius);
      ctx.rotate(rotation);

      for (let i = 0; i < items.length; i++) {
        ctx.beginPath();
        ctx.arc(0, 0, radius, i * arc, (i + 1) * arc);
        ctx.lineTo(0, 0);
        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();

        ctx.save();
        ctx.rotate(i * arc + arc / 2);
        ctx.fillStyle = '#fff';
        ctx.font = '14px Comic Sans MS';
        ctx.textAlign = 'right';
        ctx.textBaseline = 'middle';
        let textToDraw = items[i];
        if (textToDraw.length > 5) {
          textToDraw = textToDraw.substring(0, 4) + "..";
        }
        ctx.fillText(textToDraw, radius - 10, 0);
        ctx.restore();
      }
      ctx.restore();
    }

    function spinWheels() {
      if (isSpinning) return;
      isSpinning = true;

      const resultDiv = document.getElementById('result');
      resultDiv.classList.add('hidden');

      const spins = wheels.map(wheel => {
        const arcDegrees = 360 / wheel.items.length;
        const selectedIndex = Math.floor(Math.random() * wheel.items.length);
        // é¢å¤–æ—‹è½¬5åœˆ(1800åº¦)åå†åˆ°ç›®æ ‡ä½ç½®ï¼Œä½¿åŠ¨ç”»æ›´æµç•…
        const extraRotation = 1800;
        return {
          angle: 0,
          speed: 0,
          selectedIndex: selectedIndex,
          itemsLength: wheel.items.length,
          // è®¡ç®—ç›®æ ‡è§’åº¦ï¼šé¢å¤–æ—‹è½¬ + é€‰ä¸­é¡¹å±…ä¸­å¯¹é½
          targetAngle: extraRotation + (90 - (selectedIndex + 0.5) * arcDegrees),
          hasStopped: false
        };
      });

      function animate() {
        let allStopped = true;
        wheels.forEach((wheel, i) => {
          const canvas = document.getElementById(wheel.id);
          if (!spins[i].hasStopped) {
            // è®¡ç®—å½“å‰è§’åº¦ä¸ç›®æ ‡è§’åº¦çš„å·®å€¼
            const angleDiff = spins[i].targetAngle - spins[i].angle;

            // å¦‚æœå·®å€¼å°äºé˜ˆå€¼ï¼Œåˆ™åœæ­¢åŠ¨ç”»
            if (Math.abs(angleDiff) < 0.5) {
              spins[i].angle = spins[i].targetAngle;
              spins[i].hasStopped = true;
            } else {
              // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°è®¡ç®—é€Ÿåº¦
              spins[i].speed = angleDiff * 0.08;
              spins[i].angle += spins[i].speed;
              allStopped = false;
            }

            drawWheel(canvas, wheel.items, wheel.colors, spins[i].angle * Math.PI / 180);
          }
        });

        if (allStopped) {
          isSpinning = false;
          const prompt = `${wheels[3].items[spins[3].selectedIndex]} ${wheels[4].items[spins[4].selectedIndex]}çš„${wheels[0].items[spins[0].selectedIndex]}ï¼Œåœ¨${wheels[1].items[spins[1].selectedIndex]}${wheels[2].items[spins[2].selectedIndex]}ã€‚`;
          // const prompt = `${wheels[0].items[spins[0].selectedIndex]}`;

          resultDiv.innerText = prompt;
          resultDiv.classList.remove('hidden');
          confetti({ particleCount: 200, spread: 90, origin: { y: 0.6 }, colors: ['#ff69b4', '#00ffcc', '#ffd700', '#1e90ff', '#a07cc5'] });
          playSound();
        } else {
          requestAnimationFrame(animate);
        }
      }
      animate();
    }

    function copyPrompt() {
      const text = document.getElementById('result').innerText;
      if (text === "å¿«æ¥è½¬åŠ¨é­”æ³•ç›˜ï¼Œåˆ›é€ ä½ çš„é­”æ³•æç¤ºè¯å§ï¼âœ¨") {
        alert("è¯·å…ˆè½¬åŠ¨é­”æ³•ç›˜ç”Ÿæˆæç¤ºè¯å“¦ï¼");
        return;
      }
      navigator.clipboard.writeText(text).then(() => {
        alert("é­”æ³•æç¤ºè¯å·²å¤åˆ¶åˆ°ä½ çš„é­”æ³•ä¹¦å•¦ï¼âœ¨");
        confetti({ particleCount: 80, spread: 70, colors: ['#ff69b4', '#ffd700'] });
      }).catch(() => {
        alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ã€‚");
      });
    }

    function playSound() {
      const audio = new Audio('https://cdn.pixabay.com/audio/2022/03/15/audio_26399abd85.mp3');
      audio.play().catch(err => console.log('Audio playback failed:', err));
    }

    wheels.forEach(wheel => {
      const canvas = document.getElementById(wheel.id);
      drawWheel(canvas, wheel.items, wheel.colors, 0);
    });
  </script>
</body>

</html>
<script type="text/javascript">
  var gk_isXlsx = false;
  var gk_xlsxFileLookup = {};
  var gk_fileData = {};
  function filledCell(cell) {
    return cell !== '' && cell != null;
  }
  function loadFileData(filename) {
    if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
      try {
        var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
        var firstSheetName = workbook.SheetNames[0];
        var worksheet = workbook.Sheets[firstSheetName];

        // Convert sheet to JSON to filter blank rows
        var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
        // Filter out blank rows (rows where all cells are empty, null, or undefined)
        var filteredData = jsonData.filter(row => row.some(filledCell));

        // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
        var headerRowIndex = filteredData.findIndex((row, index) =>
          row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
        );
        // Fallback
        if (headerRowIndex === -1 || headerRowIndex > 25) {
          headerRowIndex = 0;
        }

        // Convert filtered JSON back to CSV
        var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
        csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
        return csv;
      } catch (e) {
        console.error(e);
        return "";
      }
    }
    return gk_fileData[filename] || "";
  }
</script>